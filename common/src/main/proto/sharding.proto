syntax = "proto3";
option java_multiple_files = true;
package com.graph.dist.proto;

message Node {
  int32 id = 1;
  int32 x = 2;
  int32 y = 3;
}

// Edges are directed. The shard of the 'from' node
// is implied by the shard data containing this edge.
message Edge {
  int32 from = 1;
  int32 to = 2;
  int32 to_shard = 3;
  int32 weight = 4;
}

message ShardData {
  int32 shard_id = 1;
  repeated Node nodes = 2;
  repeated Edge edges = 3;
}

message ShardResponse {
  bool success = 1;
  string message = 2;
}

message ShardRequest {
    int32 worker_id = 1;
}

service GraphService {
  rpc LoadShard(ShardData) returns (ShardResponse);
}

service LeaderService {
    rpc GetShard(ShardRequest) returns (ShardData);
}